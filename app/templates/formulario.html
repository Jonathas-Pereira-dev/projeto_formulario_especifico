<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Checklist de Inspeção</title>
    <link rel="stylesheet" href="/static/style.css">
    <style>
        body {
            background-color: #000000; /* preto */
            color: #ffffff; /* branco */
            font-family: Arial, sans-serif;
        }

        .nav-tabs {
            display: flex;
            list-style: none;
            padding: 0;
            margin: 0 0 20px 0;
            border-bottom: 2px solid #333;
            overflow-x: auto;
        }
        
        .nav-tabs li { margin: 0; padding: 0; }
        
        .nav-tab {
            display: block;
            padding: 12px 20px;
            color: #ffffff;
            text-decoration: none;
            border: 2px solid transparent;
            border-bottom: none;
            border-radius: 4px 4px 0 0;
            margin-right: 4px;
            background: #1f1f1f;
            cursor: pointer;
            transition: all 0.18s ease;
        }

        .nav-tab:hover {
            background: #333333;
            border-color: #0a84ff;
        }

        .nav-tab.active {
            background: #0a84ff;
            color: white;
            border-color: #0a84ff;
        }

        .aba-section {
            background: #121212;
            color: white;
            border: 1px solid #333;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 30px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }

        th, td {
            border: 1px solid #444;
            padding: 8px;
            text-align: left;
        }

        th {
            background-color: #1e1e1e;
            color: #ffffff;
        }

        .radio-group {
            display: flex;
            gap: 10px;
        }

        input[type="text"] {
            width: 100%;
            padding: 5px;
            background: #222;
            color: #fff;
            border: 1px solid #555;
            border-radius: 4px;
        }

        button {
            background-color: #0a84ff;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            box-shadow: 0 2px 6px rgba(10,132,255,0.3);
        }

        button:hover {
            background-color: #0070e0;
        }
    </style>
</head>
<body>
    <h1>Formulário de Inspeção</h1>

    {% if not itens %}
        <div style="max-width:1000px;margin:20px auto;padding:20px;background:#1a1a1a;border:1px solid #333;border-radius:8px;color:#fff;text-align:center;">
            <strong>Nenhum item encontrado</strong>
            <div>Não foram localizados itens para esta aba.</div>
        </div>
    {% endif %}
    
    <ul class="nav-tabs">
        <li><a class="nav-tab {% if aba_id == '1' %}active{% endif %}" href="/formulario/1">1. VERIFICAÇÃO E INSPEÇÃO MEC.</a></li>
        <li><a class="nav-tab {% if aba_id == '2' %}active{% endif %}" href="/formulario/2">2. INSPEÇÃO VISUAL</a></li>
        <li><a class="nav-tab {% if aba_id == '3' %}active{% endif %}" href="/formulario/3">3. VALIDAÇÃO DE CIRCUITO</a></li>
        <li><a class="nav-tab {% if aba_id == '4' %}active{% endif %}" href="/formulario/4">4. ATERRAMENTO</a></li>
        <li><a class="nav-tab {% if aba_id == '5' %}active{% endif %}" href="/formulario/5">5. DESEMPENHO DO SISTEMA</a></li>
        <li><a class="nav-tab {% if aba_id == '6' %}active{% endif %}" href="/formulario/6">6. PROCEDIMENTO VERIFICAÇÃO CLP</a></li>
    </ul> 

    <!--Formulario principal usando auxilar Jinja2-->
    <form action="/enviar" method="post">
        {% set current_section = namespace(name='') %}
        {% for item in itens %}
            {% if item.aba != current_section.name %}
                {% if current_section.name != '' %}
                    </table>
                    </div>
                {% endif %}

                {% set current_section.name = item.aba %}
                <div class="aba-section">
                    <h2>{{ item.aba }}</h2>
                    <table>
                        <tr>
                            <th>Equipamento</th>
                            <th>Quantidade</th>
                            <th>Teste Realizado</th>
                            <th>OK</th>
                            <th>NOK</th>
                            <th>Observações / Justificativa</th>
                        </tr>
            {% endif %}

            <tr>
                <td>{{ item.coluna_1 }}</td>
                <td>{{ item.coluna_2 }}</td>
                <td>{{ item.coluna_3 }}</td>
                <td>
                    <input type="radio" name="status_{{ loop.index }}" value="OK" required>
                </td>
                <td>
                    <input type="radio" name="status_{{ loop.index }}" value="NOK" required>
                </td>
                <td>
                    <input type="text" name="just_{{ loop.index }}" placeholder="Adicione uma justificativa se necessário">
                    <input type="hidden" name="equipamento_{{ loop.index }}" value="{{ item.coluna_1 }}">
                    <input type="hidden" name="aba_{{ loop.index }}" value="{{ item.aba }}">
                </td>
            </tr>
        {% endfor %}

        {% if current_section.name != '' %}
            </table>
            </div>
        {% endif %}

        <button type="submit">Salvar Inspeção</button>
    </form>
</body>
</html>
